<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<fragment xmlns="http://jmix.io/schema/ui/fragment"
          xmlns:chart="http://jmix.io/schema/ui/charts">
    <data>
        <collection id="divideByOrgDc" class="com.company.jmixpm.entity.RequestToOrganisation">
            <fetchPlan extends="_base"/>
            <loader id="divByOrgDl">
                <query>
                    <![CDATA[select Organisation.name, count(RequestToOrganisation.organisation)
                             from RequestToOrganisation
                             join Organisation on Organisation.id = RequestToOrganisation .organisation
                             group by Organisation.name]]>
                </query>
            </loader>
        </collection>
    </data>
    <layout>
        <chart:pieChart id="pie3dChart"
                        dataContainer="divideByOrgDc"
                        height="100%"
                        outlineAlpha="0.4"
                        titleField="Organisation.name"
                        valueField="count(RequestToOrganisation.organisation)"
                        width="100%">
            <chart:export/>
        </chart:pieChart>
    </layout>
</fragment>
